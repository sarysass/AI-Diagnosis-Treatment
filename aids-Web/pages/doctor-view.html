<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>医生端查看页面</title>
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/doctor-view.css">
</head>
<body>
    <!-- 左侧边栏 -->
    <div class="sidebar">
        <div class="sidebar-header">
            <!-- 新增：上传按钮（位于标题上方） -->
            <button class="upload-open-btn" title="上传模型训练文件">上传训练文件</button>

            <!-- 轻微改动：标题与收窄按钮放同一行 -->
            <div class="header-row">
                <h2>AI 智能问诊系统</h2>
                <button class="toggle-sidebar-btn">⏴</button>
            </div>
        </div>

        <button class="expand-sidebar-btn">⏵</button>

        <div class="date-item">
            <div class="record-item date-toggle">
                <span>2024-11-05</span>
                <span class="arrow">⟶</span>
            </div>
            <div class="patient-list" style="display:none;">
                <div class="patient-item" data-date="2024-11-05" data-patient="P001">患者A</div>
                <div class="patient-item" data-date="2024-11-05" data-patient="P002">患者B</div>
            </div>
        </div>

        <div class="date-item">
            <div class="record-item date-toggle">
                <span>2024-11-04</span>
                <span class="arrow">⟶</span>
            </div>
            <div class="patient-list" style="display:none;">
                <div class="patient-item" data-date="2024-11-04" data-patient="P003">患者C</div>
            </div>
        </div>

        <div class="date-item">
            <div class="record-item date-toggle">
                <span>2024-11-03</span>
                <span class="arrow">⟶</span>
            </div>
            <div class="patient-list" style="display:none;">
                <div class="patient-item" data-date="2024-11-03" data-patient="P004">患者D</div>
            </div>
        </div>
    </div>

    <!-- 右侧内容区 -->
    <div class="content">
        <div class="content-scroll-container">
            <div class="content-section" id="diagnosis-info-section">
                <h2>诊断信息</h2>
                <p>日期：2024-11-05</p>
                <p>姓名：李四</p>
                <p>性别：男</p>
                <p>年龄：24</p>
            </div>

            <div class="content-section" id="history-info-section">
                <h2>病史采集</h2>
                <p>无 / 近期无重大病史。</p>
            </div>

            <div class="content-section" id="pre-diagnosis-section">
                <h2>预诊结果</h2>
                <p>症状表现：持续性头痛。</p>
                <p>可能病因：精神压力、睡眠不足。</p>
                <a class="link-btn" href="full-record.html">查看完整记录 &gt;&gt;</a>
            </div>

            <div class="content-section" id="doctor-diagnosis-section">
                <h2>医生诊断结果</h2>
                <textarea id="doctor-diagnosis-input" placeholder="请输入医生诊断建议..." style="width:100%;height:80px;"></textarea>
                <button class="save-btn" id="save-doctor-info-btn">保存信息</button>
            </div>
        </div>
    </div>

    <!-- 新增：上传弹窗与遮罩（默认隐藏） -->
    <div class="modal" id="upload-modal" aria-hidden="true">
        <div class="modal-header">
            <h3>模型训练文件上传</h3>
            <button class="modal-close-btn" id="upload-close-btn" aria-label="关闭">✕</button>
        </div>
        <p class="caption">支持 .zip / .tar.gz / .csv / .json 等，单文件上限由后端配置。</p>
        <div class="upload-toolbar">
            <input type="file" id="model-file" multiple />
            <button id="upload-btn" class="save-btn">开始上传</button>
        </div>
        <div id="dropzone" class="dropzone">将文件拖拽到此处，或使用上方按钮选择</div>
        <div class="upload-list-wrap">
            <h4 style="margin:10px 0 8px;color:#333">已选/已上传文件</h4>
            <div id="upload-list" class="upload-list"></div>
        </div>
    </div>
    <div class="modal-mask" id="upload-mask" aria-hidden="true"></div>

    <script src="../js/global.js"></script>
    <script src="../js/doctor-view.js"></script>
</body>
</html>
